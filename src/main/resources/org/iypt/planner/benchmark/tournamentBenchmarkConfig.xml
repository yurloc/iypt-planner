<?xml version="1.0" encoding="UTF-8"?>
<plannerBenchmark>
  <benchmarkDirectory>local</benchmarkDirectory>
  <warmUpSecondsSpentLimit>30</warmUpSecondsSpentLimit>

  <inheritedSolverBenchmark>
    <problemBenchmarks>
      <solutionFileIOClass>org.iypt.planner.benchmark.TournamentIO</solutionFileIOClass>
      <inputSolutionFile>src/main/resources/org/iypt/planner/csv/schedule2012.csv</inputSolutionFile>
    </problemBenchmarks>

    <solver>
      <solutionClass>org.iypt.planner.domain.Tournament</solutionClass>
      <entityClass>org.iypt.planner.domain.VotingSeat</entityClass>
      <entityClass>org.iypt.planner.domain.NonVotingSeat</entityClass>
      <scoreDirectorFactory>
        <scoreDefinitionType>HARD_SOFT</scoreDefinitionType>
        <scoreDrl>org/iypt/planner/solver/score_rules.drl</scoreDrl>
      </scoreDirectorFactory>
      <termination>
        <minutesSpentLimit>1</minutesSpentLimit>
      </termination>
      <constructionHeuristic>
        <queuedEntityPlacer>
          <entitySelector id="placerEntitySelector1">
            <cacheType>PHASE</cacheType>
            <entityClass>org.iypt.planner.domain.VotingSeat</entityClass>
          </entitySelector>
          <changeMoveSelector>
            <entitySelector mimicSelectorRef="placerEntitySelector1"/>
          </changeMoveSelector>
        </queuedEntityPlacer>
      </constructionHeuristic>
      <constructionHeuristic>
        <queuedEntityPlacer>
          <entitySelector id="placerEntitySelector2">
            <cacheType>PHASE</cacheType>
            <entityClass>org.iypt.planner.domain.NonVotingSeat</entityClass>
          </entitySelector>
          <changeMoveSelector>
            <entitySelector mimicSelectorRef="placerEntitySelector2"/>
          </changeMoveSelector>
        </queuedEntityPlacer>
      </constructionHeuristic>
    </solver>
  </inheritedSolverBenchmark>

  <solverBenchmark>
    <name>Tabu Search</name>
    <solver>
      <localSearch>
        <unionMoveSelector>
          <changeMoveSelector>
            <entitySelector>
              <entityClass>org.iypt.planner.domain.VotingSeat</entityClass>
            </entitySelector>
            <fixedProbabilityWeight>4.0</fixedProbabilityWeight>
          </changeMoveSelector>
          <swapMoveSelector>
            <entitySelector>
              <entityClass>org.iypt.planner.domain.VotingSeat</entityClass>
            </entitySelector>
            <fixedProbabilityWeight>1.0</fixedProbabilityWeight>
          </swapMoveSelector>
          <changeMoveSelector>
            <entitySelector>
              <entityClass>org.iypt.planner.domain.NonVotingSeat</entityClass>
            </entitySelector>
            <fixedProbabilityWeight>1.0</fixedProbabilityWeight>
          </changeMoveSelector>
          <swapMoveSelector>
            <entitySelector>
              <entityClass>org.iypt.planner.domain.NonVotingSeat</entityClass>
            </entitySelector>
            <fixedProbabilityWeight>1.0</fixedProbabilityWeight>
          </swapMoveSelector>
        </unionMoveSelector>
        <acceptor>
          <entityTabuSize>7</entityTabuSize>
        </acceptor>
        <forager>
          <acceptedCountLimit>10000</acceptedCountLimit>
          <pickEarlyType>FIRST_BEST_SCORE_IMPROVING</pickEarlyType>
        </forager>
      </localSearch>
    </solver>
  </solverBenchmark>

  <solverBenchmark>
    <name>Simulated Annealing</name>
    <solver>
      <localSearch>
        <unionMoveSelector>
          <changeMoveSelector>
            <entitySelector>
              <entityClass>org.iypt.planner.domain.VotingSeat</entityClass>
            </entitySelector>
            <fixedProbabilityWeight>4.0</fixedProbabilityWeight>
          </changeMoveSelector>
          <swapMoveSelector>
            <entitySelector>
              <entityClass>org.iypt.planner.domain.VotingSeat</entityClass>
            </entitySelector>
            <fixedProbabilityWeight>1.0</fixedProbabilityWeight>
          </swapMoveSelector>
          <changeMoveSelector>
            <entitySelector>
              <entityClass>org.iypt.planner.domain.NonVotingSeat</entityClass>
            </entitySelector>
            <fixedProbabilityWeight>1.0</fixedProbabilityWeight>
          </changeMoveSelector>
          <swapMoveSelector>
            <entitySelector>
              <entityClass>org.iypt.planner.domain.NonVotingSeat</entityClass>
            </entitySelector>
            <fixedProbabilityWeight>1.0</fixedProbabilityWeight>
          </swapMoveSelector>
        </unionMoveSelector>
        <acceptor>
          <simulatedAnnealingStartingTemperature>0hard/400soft</simulatedAnnealingStartingTemperature>
        </acceptor>
        <forager>
          <acceptedCountLimit>4</acceptedCountLimit>
        </forager>
      </localSearch>
    </solver>
  </solverBenchmark>

  <solverBenchmark>
    <name>Late Acceptance</name>
    <solver>
      <localSearch>
        <unionMoveSelector>
          <changeMoveSelector>
            <entitySelector>
              <entityClass>org.iypt.planner.domain.VotingSeat</entityClass>
            </entitySelector>
            <fixedProbabilityWeight>4.0</fixedProbabilityWeight>
          </changeMoveSelector>
          <swapMoveSelector>
            <entitySelector>
              <entityClass>org.iypt.planner.domain.VotingSeat</entityClass>
            </entitySelector>
            <fixedProbabilityWeight>1.0</fixedProbabilityWeight>
          </swapMoveSelector>
          <changeMoveSelector>
            <entitySelector>
              <entityClass>org.iypt.planner.domain.NonVotingSeat</entityClass>
            </entitySelector>
            <fixedProbabilityWeight>1.0</fixedProbabilityWeight>
          </changeMoveSelector>
          <swapMoveSelector>
            <entitySelector>
              <entityClass>org.iypt.planner.domain.NonVotingSeat</entityClass>
            </entitySelector>
            <fixedProbabilityWeight>1.0</fixedProbabilityWeight>
          </swapMoveSelector>
        </unionMoveSelector>
        <acceptor>
          <lateAcceptanceSize>400</lateAcceptanceSize>
        </acceptor>
        <forager>
          <acceptedCountLimit>4</acceptedCountLimit>
        </forager>
      </localSearch>
    </solver>
  </solverBenchmark>
</plannerBenchmark>